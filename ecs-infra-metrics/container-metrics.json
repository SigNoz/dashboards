{
  "description": "Container Metrics Dashboard of ECS using sidecar",
  "layout": [
    {
      "h": 2,
      "i": "44ba8a26-8d50-411d-944d-26b4c85bfa8a",
      "moved": false,
      "static": false,
      "w": 6,
      "x": 6,
      "y": 2
    },
    {
      "h": 2,
      "i": "64d4a74c-cba0-4e41-a112-31e3f475a93a",
      "moved": false,
      "static": false,
      "w": 6,
      "x": 0,
      "y": 2
    },
    {
      "h": 2,
      "i": "a84325cc-66d1-46e4-ad23-ec7d7390934f",
      "moved": false,
      "static": false,
      "w": 6,
      "x": 6,
      "y": 4
    },
    {
      "h": 2,
      "i": "34180d51-1edb-49d3-9780-8cf0158ecc94",
      "moved": false,
      "static": false,
      "w": 6,
      "x": 0,
      "y": 4
    },
    {
      "h": 2,
      "i": "ddae7e66-f8e0-4752-becb-8b39c6821e64",
      "moved": false,
      "static": false,
      "w": 6,
      "x": 6,
      "y": 0
    },
    {
      "h": 2,
      "i": "863c88ed-8ce3-4050-821f-5acec3b3f5df",
      "moved": false,
      "static": false,
      "w": 6,
      "x": 0,
      "y": 0
    }
  ],
  "tags": ["ecs", "ec2", "sidecar"],
  "title": "Container Metrics - ECS",
  "variables": {
    "ClusterName": {
      "allSelected": false,
      "customValue": "",
      "description": "",
      "modificationUUID": "8add80ed-21dd-491c-af83-3608741c0428",
      "multiSelect": false,
      "name": "ClusterName",
      "queryValue": "SELECT DISTINCT(JSONExtractString(labels, 'ClusterName'))\nFROM signoz_metrics.time_series_v2",
      "selectedValue": "",
      "showALLOption": false,
      "sort": "ASC",
      "textboxValue": "",
      "type": "QUERY"
    },
    "ServiceName": {
      "allSelected": false,
      "customValue": "",
      "description": "",
      "modificationUUID": "919ef398-8d59-40cf-ab1e-273e60590802",
      "multiSelect": false,
      "name": "ServiceName",
      "queryValue": "SELECT DISTINCT(JSONExtractString(labels, 'ServiceName'))\nFROM signoz_metrics.time_series_v2\nWHERE JSONExtractString(labels, 'ClusterName') = {{ .ClusterName }}",
      "selectedValue": "",
      "showALLOption": false,
      "sort": "ASC",
      "textboxValue": "",
      "type": "QUERY"
    }
  },
  "widgets": [
    {
      "description": "",
      "id": "863c88ed-8ce3-4050-821f-5acec3b3f5df",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": null,
                "id": "02428ab3-f31a-4670-a3de-0a66ca8e4069",
                "isColumn": null,
                "key": "ecs_task_memory_usage",
                "type": null
              },
              "aggregateOperator": "noop",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [
                  {
                    "id": "45e2472e",
                    "key": {
                      "dataType": null,
                      "isColumn": null,
                      "key": "ClusterName",
                      "type": null
                    },
                    "op": "=",
                    "value": "{{.ClusterName}}"
                  },
                  {
                    "id": "871a8069",
                    "key": {
                      "dataType": null,
                      "isColumn": null,
                      "key": "ServiceName",
                      "type": null
                    },
                    "op": "=",
                    "value": "{{.ServiceName}}"
                  }
                ],
                "op": "AND"
              },
              "groupBy": [],
              "having": [],
              "legend": "{{TaskDefinitionFamily}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 30
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": "",
            "name": "A",
            "rawQuery": ""
          }
        ],
        "promql": [
          {
            "disabled": false,
            "legend": "",
            "name": "A",
            "query": ""
          }
        ],
        "queryType": "builder"
      },
      "queryData": {
        "data": {
          "queryData": []
        },
        "error": false,
        "errorMessage": "",
        "loading": false
      },
      "timePreferance": "GLOBAL_TIME",
      "title": "Memory Usage",
      "yAxisUnit": "bytes"
    },
    {
      "description": "",
      "id": "ddae7e66-f8e0-4752-becb-8b39c6821e64",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": null,
                "id": "4635a2e2-93b3-4403-be03-f9d93ea68548",
                "isColumn": null,
                "key": "ecs_task_cpu_utilized",
                "type": null
              },
              "aggregateOperator": "noop",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [
                  {
                    "id": "d6382fb4",
                    "key": {
                      "dataType": null,
                      "isColumn": null,
                      "key": "ClusterName",
                      "type": null
                    },
                    "op": "=",
                    "value": "{{.ClusterName}}"
                  },
                  {
                    "id": "700fa814",
                    "key": {
                      "dataType": null,
                      "isColumn": null,
                      "key": "ServiceName",
                      "type": null
                    },
                    "op": "=",
                    "value": "{{.ServiceName}}"
                  }
                ],
                "op": "AND"
              },
              "groupBy": [],
              "having": [],
              "legend": "{{TaskDefinitionFamily}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 30
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": "",
            "name": "A",
            "rawQuery": ""
          }
        ],
        "promql": [
          {
            "disabled": false,
            "legend": "",
            "name": "A",
            "query": ""
          }
        ],
        "queryType": "builder"
      },
      "queryData": {
        "data": {
          "queryData": []
        },
        "error": false,
        "errorMessage": "",
        "loading": false
      },
      "timePreferance": "GLOBAL_TIME",
      "title": "CPU Utlized",
      "yAxisUnit": "percent"
    },
    {
      "description": "",
      "id": "34180d51-1edb-49d3-9780-8cf0158ecc94",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": "float64",
                "id": "acd0a15a-8fd7-42ad-a8ce-581b5a4c4a13",
                "isColumn": true,
                "key": "ecs_task_network_rate_rx",
                "type": ""
              },
              "aggregateOperator": "avg",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [],
                "op": "AND"
              },
              "groupBy": [
                {
                  "dataType": "string",
                  "id": "c7b104a8-a5dd-4e76-8893-9ddda0ed3ef6",
                  "isColumn": false,
                  "key": "TaskDefinitionFamily",
                  "type": "tag"
                }
              ],
              "having": [],
              "legend": "{{TaskDefinitionFamily}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 30
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": "",
            "name": "A",
            "rawQuery": ""
          }
        ],
        "promql": [
          {
            "disabled": false,
            "legend": "",
            "name": "A",
            "query": ""
          }
        ],
        "queryType": "builder"
      },
      "queryData": {
        "data": {
          "queryData": []
        },
        "error": false,
        "errorMessage": "",
        "loading": false
      },
      "timePreferance": "GLOBAL_TIME",
      "title": "Network Rate (receive)",
      "yAxisUnit": "binBps"
    },
    {
      "description": "",
      "id": "a84325cc-66d1-46e4-ad23-ec7d7390934f",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": "float64",
                "id": "4f8e40f0-5ff3-4fb3-b21d-56c65921ecdc",
                "isColumn": true,
                "key": "ecs_task_network_rate_tx",
                "type": ""
              },
              "aggregateOperator": "noop",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [
                  {
                    "id": "b79320b4",
                    "key": {
                      "dataType": "string",
                      "id": "cad7a9ef-dc81-4d7d-aea6-ef1c6cc80135",
                      "isColumn": false,
                      "key": "ClusterName",
                      "type": "tag"
                    },
                    "op": "=",
                    "value": "{{.ClusterName}}"
                  },
                  {
                    "id": "d5c3645a",
                    "key": {
                      "dataType": "string",
                      "id": "b8c3bcaa-80bd-437d-8a63-0a2fa6aaa64d",
                      "isColumn": false,
                      "key": "ServiceName",
                      "type": "tag"
                    },
                    "op": "=",
                    "value": "{{.ServiceName}} "
                  }
                ],
                "op": "AND"
              },
              "groupBy": [],
              "having": [],
              "legend": "{{TaskDefinitionFamily}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 30
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": "",
            "name": "A",
            "rawQuery": ""
          }
        ],
        "promql": [
          {
            "disabled": false,
            "legend": "",
            "name": "A",
            "query": ""
          }
        ],
        "queryType": "builder"
      },
      "queryData": {
        "data": {
          "queryData": []
        },
        "error": false,
        "errorMessage": "",
        "loading": false
      },
      "timePreferance": "GLOBAL_TIME",
      "title": "Network Rate (transmit)",
      "yAxisUnit": "binBps"
    },
    {
      "description": "",
      "id": "64d4a74c-cba0-4e41-a112-31e3f475a93a",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": "float64",
                "id": "082b3198-db5c-4160-a80c-df942056b926",
                "isColumn": true,
                "key": "ecs_task_network_io_usage_rx_bytes",
                "type": ""
              },
              "aggregateOperator": "rate_sum",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [
                  {
                    "id": "a786d1d6",
                    "key": {
                      "dataType": "string",
                      "id": "5f4655b0-a7c6-4de2-862a-40d751aadf26",
                      "isColumn": false,
                      "key": "ClusterName",
                      "type": "tag"
                    },
                    "op": "=",
                    "value": "{{.ClusterName}}"
                  },
                  {
                    "id": "3edd4c4b",
                    "key": {
                      "dataType": "string",
                      "id": "1c95f3a5-dad9-406a-8227-32528e8b94eb",
                      "isColumn": false,
                      "key": "ServiceName",
                      "type": "tag"
                    },
                    "op": "=",
                    "value": "{{.ServiceName}}"
                  }
                ],
                "op": "AND"
              },
              "groupBy": [
                {
                  "dataType": "string",
                  "id": "38c7979d-97b1-4414-b728-840ae11f960f",
                  "isColumn": false,
                  "key": "TaskDefinitionFamily",
                  "type": "tag"
                }
              ],
              "having": [],
              "legend": "{{TaskDefinitionFamily}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 30
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": "",
            "name": "A",
            "rawQuery": ""
          }
        ],
        "promql": [
          {
            "disabled": false,
            "legend": "",
            "name": "A",
            "query": ""
          }
        ],
        "queryType": "builder"
      },
      "queryData": {
        "data": {
          "queryData": []
        },
        "error": false,
        "errorMessage": "",
        "loading": false
      },
      "timePreferance": "GLOBAL_TIME",
      "title": "Network IO (receive)",
      "yAxisUnit": "binBps"
    },
    {
      "description": "",
      "id": "44ba8a26-8d50-411d-944d-26b4c85bfa8a",
      "isStacked": false,
      "nullZeroValues": "zero",
      "opacity": "1",
      "panelTypes": "graph",
      "query": {
        "builder": {
          "queryData": [
            {
              "aggregateAttribute": {
                "dataType": null,
                "id": "4635a2e2-93b3-4403-be03-f9d93ea68548",
                "isColumn": null,
                "key": "ecs_task_network_io_usage_tx_bytes",
                "type": null
              },
              "aggregateOperator": "rate_sum",
              "dataSource": "metrics",
              "disabled": false,
              "expression": "A",
              "filters": {
                "items": [
                  {
                    "id": "a177a635",
                    "key": {
                      "dataType": "string",
                      "id": "1b240592-0936-489e-b3a6-284d9032b8c6",
                      "isColumn": false,
                      "key": "ClusterName",
                      "type": "tag"
                    },
                    "op": "=",
                    "value": "{{.ClusterName}}"
                  },
                  {
                    "id": "f12de2f9",
                    "key": {
                      "dataType": "string",
                      "id": "a65f59db-9c9d-4eb6-8105-7555d3a899c1",
                      "isColumn": false,
                      "key": "ServiceName",
                      "type": "tag"
                    },
                    "op": "=",
                    "value": "{{.ServiceName}}"
                  }
                ],
                "op": "AND"
              },
              "groupBy": [
                {
                  "dataType": "string",
                  "id": "eb58d46c-e160-4e84-831c-8c2c806ba13b",
                  "isColumn": false,
                  "key": "TaskDefinitionFamily",
                  "type": "tag"
                }
              ],
              "having": [],
              "legend": "{{TaskDefinitionFamily}}",
              "limit": null,
              "orderBy": [],
              "queryName": "A",
              "reduceTo": "sum",
              "stepInterval": 30
            }
          ],
          "queryFormulas": []
        },
        "clickhouse_sql": [
          {
            "disabled": false,
            "legend": "",
            "name": "A",
            "rawQuery": ""
          }
        ],
        "promql": [
          {
            "disabled": false,
            "legend": "",
            "name": "A",
            "query": ""
          }
        ],
        "queryType": "builder"
      },
      "queryData": {
        "data": {
          "queryData": []
        },
        "error": false,
        "errorMessage": "",
        "loading": false
      },
      "timePreferance": "GLOBAL_TIME",
      "title": "Network IO (transmit)",
      "yAxisUnit": "binBps"
    }
  ]
}
