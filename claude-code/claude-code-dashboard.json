{"description":"","image":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE0Ljk0OTQgMTMuOTQyQzE2LjIzMTggMTIuNDI1OCAxNy4zMjY4IDkuNzAyMiAxNi4xOTU2IDYuNTc0ODdDMTUuNjQ0MyA1LjA1MjQ1IDE1LjAyMTkgNC4yMDI0OSAxNC4yOTY5IDMuNjYyNTJDMTMuODU1NyAzLjMzMzc5IDEyLjA5MzMgMi41MDYzMyA5Ljc1OTY1IDIuODY3NTZDOC4wNTM0OSAzLjEzMjU1IDUuNzc0ODcgNC4yMDg3NCA0LjI5MzY5IDUuOTU5OUMyLjg1NzUyIDcuNjYxMDYgMS43NDg4MyA5LjAwNDc0IDEuNjk3NTggMTAuMzA5N0MxLjYzMTMzIDExLjk4ODMgMi44OTYyNyAxMy40MzA4IDMuMDUwMDEgMTMuNjY0NUMzLjMyMzc0IDE0LjA3OTUgNS4xOTExNSAxNi40NTE4IDguNjk5NzEgMTYuNTczMUMxMS43OTcgMTYuNjc5MyAxMy44MTQ0IDE1LjI4NDQgMTQuOTQ5NCAxMy45NDJaIiBmaWxsPSIjNDAzRDNFIi8+CjxwYXRoIGQ9Ik00LjU1MzYzIDIuNzM3NDdDMi45Mzc0NiAzLjg5MTE2IDEuMTIxMzEgNi4yNTEwMyAxLjQ0NzU0IDkuNTYwODZDMS42MDYyOCAxMS4xNzIgMi4wMDI1MSAxMi4xNDk1IDIuNTcxMjMgMTIuODUwN0MyLjkxNzQ2IDEzLjI3ODIgNC40MTk4OCAxNC41NDkzIDYuNzczNTEgMTQuNzM2OEM5LjE0NTg4IDE0LjkyNTYgMTAuOTQ5NSAxNC4zOTQ0IDEyLjgzMzIgMTMuMDg0NEMxNi42NjE3IDEwLjQyMDggMTYuMDk4IDYuMzkzNTMgMTUuOTM0MyA1LjkyNDhDMTUuNzcwNSA1LjQ1NjA3IDE0LjU0NDQgMi42OTYyMiAxMS4xNzMzIDEuNzE1MDJDOC4xOTg0NCAwLjg1MDA2OCA1Ljk4MzU1IDEuNzE1MDIgNC41NTM2MyAyLjczNzQ3WiIgZmlsbD0iIzVFNjM2NyIvPgo8cGF0aCBkPSJNNy4zOTM1MyAyLjk2MTA5QzUuNjE3MzcgMi44OTczNCAzLjkxOTk2IDQuMjg4NTIgMy43NTYyMiA2LjAwNTkzQzMuNTkyNDggNy43MjIwOSA0LjY1NDkyIDkuMDI5NTIgNi4zMDk4MyA5LjI5NTc2QzcuOTY0NzUgOS41NjA3NCA5Ljg3ODM5IDguNTU1OCAxMC4yNjM0IDYuNDUwOTFDMTAuNjYwOSA0LjI4MjI3IDkuMDg5NjkgMy4wMjIzNCA3LjM5MzUzIDIuOTYxMDlaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNy45NDIxNyA1LjkwMTE1QzcuOTQyMTcgNS45MDExNSA4LjM2OTY1IDUuODEyNCA4LjQ1NDY1IDUuMTgyNDRDOC41MzgzOSA0LjU2MjQ3IDguMjMwOTEgNC4wMzM3NSA3LjUxMzQ1IDMuODQzNzZDNi43MzM0OSAzLjYzNzUyIDYuMjA0NzcgNC4wNjYyNSA2LjA2NzI3IDQuNTE3NDdDNS44NzYwMyA1LjE0NDk0IDYuMTU4NTIgNS40NDM2NyA2LjE1ODUyIDUuNDQzNjdDNi4xNTg1MiA1LjQ0MzY3IDUuMzkzNTYgNS42Mjc0MSA1LjMzMjMxIDYuNTI5ODdDNS4yNzQ4MSA3LjM4MTA3IDUuODU2MDMgNy44Mzg1NSA2LjQzOTc1IDcuOTc4NTRDNy4xNjA5NiA4LjE1MjI4IDcuOTc4NDIgNy45NTQ3OSA4LjE3ODQxIDcuMDM0ODRDOC4zNDQ2NSA2LjI3NzM4IDcuOTQyMTcgNS45MDExNSA3Ljk0MjE3IDUuOTAxMTVaIiBmaWxsPSIjMzAzMDMwIi8+CjxwYXRoIGQ9Ik02LjczOTgzIDQuNzUzNjJDNi42NzEwOSA1LjAxMjM1IDYuODA4NTggNS4yNjIzNCA3LjA3ODU3IDUuMzMxMDlDNy4zNjk4IDUuNDA0ODMgNy42MzQ3OSA1LjMwODU5IDcuNzA2MDMgNS4wMTExQzcuNzY4NTMgNC43NDczNyA3LjY0MzU0IDQuNTE0ODggNy4zMzYwNSA0LjQzOTg4QzcuMDgzNTcgNC4zNzczOSA2LjgxNDgzIDQuNDcxMTMgNi43Mzk4MyA0Ljc1MzYyWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTYuOTU5NzggNi4wMzk3NEM2LjYzMjMgNS45Mzg0OSA2LjE5OTgyIDYuMDY0NzMgNi4xMzEwNyA2LjUwNDcxQzYuMDYyMzMgNi45NDQ2OSA2LjMyNjA2IDcuMTY5NjggNi42NzEwNCA3LjIzMjE3QzcuMDE2MDMgNy4yOTQ2NyA3LjM0MjI2IDcuMTEzNDMgNy40MDYwMSA2Ljc2MDk1QzcuNDY4NSA2LjQwOTcyIDcuMjg2MDEgNi4xMzk3MyA2Ljk1OTc4IDYuMDM5NzRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K","layout":[{"h":2,"i":"a5c20488-f0e0-4d5b-b976-629cd000bcfb","moved":false,"static":false,"w":2,"x":0,"y":0},{"h":2,"i":"1a04ae07-cc19-4a43-b2bc-9012cca41928","moved":false,"static":false,"w":2,"x":2,"y":0},{"h":2,"i":"27d80d84-fd87-474b-8d5f-b4c3adac89d4","moved":false,"static":false,"w":2,"x":4,"y":0},{"h":2,"i":"9f3c19ad-090c-4245-8b44-ff13e22d1fa4","moved":false,"static":false,"w":2,"x":6,"y":0},{"h":2,"i":"bc24e2db-0d09-452d-aa82-11e6901ae082","moved":false,"static":false,"w":2,"x":8,"y":0},{"h":2,"i":"a251918c-1f51-49cf-9645-110e5d58a14d","moved":false,"static":false,"w":2,"x":10,"y":0},{"h":6,"i":"ce3c76ba-8c0a-4916-bb7f-61ccc612b41c","moved":false,"static":false,"w":5,"x":0,"y":2},{"h":6,"i":"51d3c8b4-5a78-4694-bab8-8198c1b0c091","moved":false,"static":false,"w":6,"x":5,"y":2},{"h":5,"i":"558c03f8-48f6-4e17-a02e-b1c13824a214","moved":false,"static":false,"w":4,"x":0,"y":8},{"h":5,"i":"fef0cc23-606f-4116-a889-b77922b5d22b","moved":false,"static":false,"w":4,"x":4,"y":8},{"h":5,"i":"783d58d3-c19b-4e2c-a593-5b791270cfe7","moved":false,"static":false,"w":4,"x":8,"y":8},{"h":5,"i":"f47a0a8f-014f-415e-9c19-951590fa9449","moved":false,"static":false,"w":4,"x":0,"y":13},{"h":5,"i":"62fd9271-c7fb-43b6-a099-f436a9b59156","moved":false,"static":false,"w":4,"x":4,"y":13},{"h":5,"i":"79d52e91-6d94-4383-b3c6-8d6b99c05c95","moved":false,"static":false,"w":4,"x":8,"y":13}],"panelMap":{},"tags":[],"title":"Claude Code","uploadedGrafana":false,"variables":{"f3818614-1297-4388-97c7-721f96719e11":{"allSelected":false,"customValue":"Pro,Max 5x,Max 20x","description":"The Claude Code account type the current account is set to.","id":"f3818614-1297-4388-97c7-721f96719e11","modificationUUID":"865e2bc9-41cd-4b0b-8a23-31fbd0d8d4c8","multiSelect":false,"name":"account_type","order":0,"queryValue":"","showALLOption":false,"sort":"DISABLED","textboxValue":"","type":"CUSTOM"}},"version":"v5","widgets":[{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{},"description":"","fillSpans":false,"id":"ce3c76ba-8c0a-4916-bb7f-61ccc612b41c","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"graph","query":{"builder":{"queryData":[{"aggregations":[{"expression":"p95(duration_ms )"}],"dataSource":"logs","disabled":false,"expression":"A","filter":{"expression":"duration_ms EXISTS "},"functions":[],"groupBy":[],"having":{"expression":""},"legend":"","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"d554aa0b-f3cf-4c28-b9e7-6c6a32dbf4aa","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"string","name":"body","type":""},{"dataType":"string","name":"timestamp","type":""}],"selectedTracesFields":[{"dataType":"string","id":"serviceName--string--tag--true","isColumn":true,"isJSON":false,"key":"serviceName","type":"tag"},{"dataType":"string","id":"name--string--tag--true","isColumn":true,"isJSON":false,"key":"name","type":"tag"},{"dataType":"float64","id":"durationNano--float64--tag--true","isColumn":true,"isJSON":false,"key":"durationNano","type":"tag"},{"dataType":"string","id":"httpMethod--string--tag--true","isColumn":true,"isJSON":false,"key":"httpMethod","type":"tag"},{"dataType":"string","id":"responseStatusCode--string--tag--true","isColumn":true,"isJSON":false,"key":"responseStatusCode","type":"tag"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Command Duration (P95)","yAxisUnit":"ms"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{},"description":"","fillSpans":false,"id":"a5c20488-f0e0-4d5b-b976-629cd000bcfb","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"value","query":{"builder":{"queryData":[{"aggregations":[{"expression":"sum(input_tokens)"}],"dataSource":"logs","disabled":false,"expression":"A","filter":{"expression":"input_tokens EXISTS "},"functions":[],"groupBy":[],"having":{"expression":""},"legend":"","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"b9b0f1ca-5256-4de2-8659-b635d572b965","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"string","name":"body","type":""},{"dataType":"string","name":"timestamp","type":""}],"selectedTracesFields":[{"dataType":"string","id":"serviceName--string--tag--true","isColumn":true,"isJSON":false,"key":"serviceName","type":"tag"},{"dataType":"string","id":"name--string--tag--true","isColumn":true,"isJSON":false,"key":"name","type":"tag"},{"dataType":"float64","id":"durationNano--float64--tag--true","isColumn":true,"isJSON":false,"key":"durationNano","type":"tag"},{"dataType":"string","id":"httpMethod--string--tag--true","isColumn":true,"isJSON":false,"key":"httpMethod","type":"tag"},{"dataType":"string","id":"responseStatusCode--string--tag--true","isColumn":true,"isJSON":false,"key":"responseStatusCode","type":"tag"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Input Token Usage","yAxisUnit":"none"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{},"description":"","fillSpans":false,"id":"1a04ae07-cc19-4a43-b2bc-9012cca41928","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"value","query":{"builder":{"queryData":[{"aggregations":[{"expression":"sum(output_tokens)"}],"dataSource":"logs","disabled":false,"expression":"A","filter":{"expression":"output_tokens EXISTS "},"functions":[],"groupBy":[],"having":{"expression":""},"legend":"","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"1a322dbb-5187-4800-a7d3-e63e9e4e9934","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"string","name":"body","type":""},{"dataType":"string","name":"timestamp","type":""}],"selectedTracesFields":[{"dataType":"string","id":"serviceName--string--tag--true","isColumn":true,"isJSON":false,"key":"serviceName","type":"tag"},{"dataType":"string","id":"name--string--tag--true","isColumn":true,"isJSON":false,"key":"name","type":"tag"},{"dataType":"float64","id":"durationNano--float64--tag--true","isColumn":true,"isJSON":false,"key":"durationNano","type":"tag"},{"dataType":"string","id":"httpMethod--string--tag--true","isColumn":true,"isJSON":false,"key":"httpMethod","type":"tag"},{"dataType":"string","id":"responseStatusCode--string--tag--true","isColumn":true,"isJSON":false,"key":"responseStatusCode","type":"tag"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Output Token Usage","yAxisUnit":"none"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{},"description":"","fillSpans":false,"id":"bc24e2db-0d09-452d-aa82-11e6901ae082","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"value","query":{"builder":{"queryData":[{"aggregations":[{"expression":"sum(cost_usd)"}],"dataSource":"logs","disabled":false,"expression":"A","filter":{"expression":"cost_usd EXISTS "},"functions":[],"groupBy":[],"having":{"expression":""},"legend":"","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"07342a73-a65a-4ab2-9be2-7090fb08f157","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"string","name":"body","type":""},{"dataType":"string","name":"timestamp","type":""}],"selectedTracesFields":[{"dataType":"string","id":"serviceName--string--tag--true","isColumn":true,"isJSON":false,"key":"serviceName","type":"tag"},{"dataType":"string","id":"name--string--tag--true","isColumn":true,"isJSON":false,"key":"name","type":"tag"},{"dataType":"float64","id":"durationNano--float64--tag--true","isColumn":true,"isJSON":false,"key":"durationNano","type":"tag"},{"dataType":"string","id":"httpMethod--string--tag--true","isColumn":true,"isJSON":false,"key":"httpMethod","type":"tag"},{"dataType":"string","id":"responseStatusCode--string--tag--true","isColumn":true,"isJSON":false,"key":"responseStatusCode","type":"tag"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Total Cost(USD)","yAxisUnit":"currencyUSD"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{},"description":"","fillSpans":false,"id":"558c03f8-48f6-4e17-a02e-b1c13824a214","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"pie","query":{"builder":{"queryData":[{"aggregations":[{"expression":"count()"}],"dataSource":"logs","disabled":false,"expression":"A","filter":{"expression":"success exists AND success = 'true'"},"functions":[],"groupBy":[],"having":{"expression":""},"legend":"Success","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980},{"aggregations":[{"expression":"count()"}],"dataSource":"logs","disabled":false,"expression":"B","filter":{"expression":"success exists AND success != 'true'"},"functions":[],"groupBy":[],"having":{"expression":""},"legend":"Fail","limit":null,"orderBy":[],"queryName":"B","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"498d45f1-7367-445f-9d3a-482a17f00540","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"string","name":"body","type":""},{"dataType":"string","name":"timestamp","type":""}],"selectedTracesFields":[{"dataType":"string","id":"serviceName--string--tag--true","isColumn":true,"isJSON":false,"key":"serviceName","type":"tag"},{"dataType":"string","id":"name--string--tag--true","isColumn":true,"isJSON":false,"key":"name","type":"tag"},{"dataType":"float64","id":"durationNano--float64--tag--true","isColumn":true,"isJSON":false,"key":"durationNano","type":"tag"},{"dataType":"string","id":"httpMethod--string--tag--true","isColumn":true,"isJSON":false,"key":"httpMethod","type":"tag"},{"dataType":"string","id":"responseStatusCode--string--tag--true","isColumn":true,"isJSON":false,"key":"responseStatusCode","type":"tag"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Success Rate","yAxisUnit":"none"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{},"description":"","fillSpans":false,"id":"fef0cc23-606f-4116-a889-b77922b5d22b","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"pie","query":{"builder":{"queryData":[{"aggregations":[{"expression":"count()"}],"dataSource":"logs","disabled":false,"expression":"A","filter":{"expression":"terminal.type exists"},"functions":[],"groupBy":[{"dataType":"string","id":"terminal.type--string--tag--false","isColumn":false,"isJSON":false,"key":"terminal.type","type":"tag"}],"having":{"expression":""},"legend":"{{terminal.type}}","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"f300afed-d069-48c2-b464-f3aacf399b5a","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"string","name":"body","type":""},{"dataType":"string","name":"timestamp","type":""}],"selectedTracesFields":[{"dataType":"string","id":"serviceName--string--tag--true","isColumn":true,"isJSON":false,"key":"serviceName","type":"tag"},{"dataType":"string","id":"name--string--tag--true","isColumn":true,"isJSON":false,"key":"name","type":"tag"},{"dataType":"float64","id":"durationNano--float64--tag--true","isColumn":true,"isJSON":false,"key":"durationNano","type":"tag"},{"dataType":"string","id":"httpMethod--string--tag--true","isColumn":true,"isJSON":false,"key":"httpMethod","type":"tag"},{"dataType":"string","id":"responseStatusCode--string--tag--true","isColumn":true,"isJSON":false,"key":"responseStatusCode","type":"tag"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Terminal Type","yAxisUnit":"none"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{},"description":"","fillSpans":false,"id":"f47a0a8f-014f-415e-9c19-951590fa9449","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"pie","query":{"builder":{"queryData":[{"aggregations":[{"expression":"count() "}],"dataSource":"logs","disabled":false,"expression":"A","filter":{"expression":"service.name = 'claude-code' model EXISTS "},"functions":[],"groupBy":[{"dataType":"","id":"model------false","isColumn":false,"key":"model","type":""}],"having":{"expression":""},"legend":"{{model}}","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"b7c6d6da-424d-45b5-9c9c-aa80fd70e765","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"","fieldContext":"log","fieldDataType":"","isColumn":true,"isIndexed":false,"isJSON":false,"name":"timestamp","signal":"logs","type":"log"},{"dataType":"","fieldContext":"log","fieldDataType":"","isColumn":true,"isIndexed":false,"isJSON":false,"name":"body","signal":"logs","type":"log"}],"selectedTracesFields":[{"fieldContext":"resource","fieldDataType":"string","name":"service.name","signal":"traces"},{"fieldContext":"span","fieldDataType":"string","name":"name","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"duration_nano","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"http_method","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"response_status_code","signal":"traces"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Model Distribution","yAxisUnit":"none"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{},"description":"","fillSpans":false,"id":"51d3c8b4-5a78-4694-bab8-8198c1b0c091","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"graph","query":{"builder":{"queryData":[{"aggregations":[{"metricName":"claude_code.token.usage","reduceTo":"avg","spaceAggregation":"sum","temporality":"","timeAggregation":"rate"}],"dataSource":"metrics","disabled":false,"expression":"A","filter":{"expression":""},"functions":[],"groupBy":[],"having":{"expression":""},"legend":"Total Token Usage","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"65b85b9a-8bde-44a0-bddf-7f53d87cf45a","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"string","name":"body","type":""},{"dataType":"string","name":"timestamp","type":""}],"selectedTracesFields":[{"dataType":"string","id":"serviceName--string--tag--true","isColumn":true,"isJSON":false,"key":"serviceName","type":"tag"},{"dataType":"string","id":"name--string--tag--true","isColumn":true,"isJSON":false,"key":"name","type":"tag"},{"dataType":"float64","id":"durationNano--float64--tag--true","isColumn":true,"isJSON":false,"key":"durationNano","type":"tag"},{"dataType":"string","id":"httpMethod--string--tag--true","isColumn":true,"isJSON":false,"key":"httpMethod","type":"tag"},{"dataType":"string","id":"responseStatusCode--string--tag--true","isColumn":true,"isJSON":false,"key":"responseStatusCode","type":"tag"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Token Usage Over Time","yAxisUnit":"none"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{"accept":"#7abde9"},"description":"","fillSpans":false,"id":"62fd9271-c7fb-43b6-a099-f436a9b59156","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"pie","query":{"builder":{"queryData":[{"aggregations":[{"expression":"count() "}],"dataSource":"logs","disabled":false,"expression":"A","filter":{"expression":"decision EXISTS "},"functions":[],"groupBy":[{"dataType":"","id":"decision------false","isColumn":false,"key":"decision","type":""}],"having":{"expression":""},"legend":"{{decision}}","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"13aa7ad8-b3a6-4e81-b309-acbe867ff066","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"","fieldContext":"log","fieldDataType":"","isColumn":true,"isIndexed":false,"isJSON":false,"name":"timestamp","signal":"logs","type":"log"},{"dataType":"","fieldContext":"log","fieldDataType":"","isColumn":true,"isIndexed":false,"isJSON":false,"name":"body","signal":"logs","type":"log"}],"selectedTracesFields":[{"fieldContext":"resource","fieldDataType":"string","name":"service.name","signal":"traces"},{"fieldContext":"span","fieldDataType":"string","name":"name","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"duration_nano","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"http_method","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"response_status_code","signal":"traces"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"User Decisions","yAxisUnit":"none"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{"A":""},"columnWidths":{"A":145,"user.email":100},"customLegendColors":{},"description":"","fillSpans":false,"id":"783d58d3-c19b-4e2c-a593-5b791270cfe7","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"table","query":{"builder":{"queryData":[{"aggregations":[{"expression":"count(user.email)"}],"dataSource":"logs","disabled":false,"expression":"A","filter":{"expression":"body = claude_code.user_prompt"},"functions":[],"groupBy":[{"dataType":"string","id":"user.email--string--tag--false","isColumn":false,"isJSON":false,"key":"user.email","type":"tag"}],"having":{"expression":""},"legend":"Number of Requests","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"0f7dc4a6-e49c-4e90-857a-3043c7b5d6a6","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"string","name":"user.email","type":""}],"selectedTracesFields":[{"fieldContext":"resource","fieldDataType":"string","name":"service.name","signal":"traces"},{"fieldContext":"span","fieldDataType":"string","name":"name","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"duration_nano","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"http_method","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"response_status_code","signal":"traces"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Users and Reqeusts","yAxisUnit":"none"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{},"description":"","fillSpans":false,"id":"27d80d84-fd87-474b-8d5f-b4c3adac89d4","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"value","query":{"builder":{"queryData":[{"aggregations":[{"expression":"count(DISTINCT session.id) "}],"dataSource":"logs","disabled":false,"expression":"A","filter":{"expression":"service.name = 'claude-code' "},"functions":[],"groupBy":[],"having":{"expression":""},"legend":"","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"fdcbc002-9a17-4e5b-87aa-2bb15b485aea","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"","fieldContext":"log","fieldDataType":"","isColumn":true,"isIndexed":false,"isJSON":false,"name":"timestamp","signal":"logs","type":"log"},{"dataType":"","fieldContext":"log","fieldDataType":"","isColumn":true,"isIndexed":false,"isJSON":false,"name":"body","signal":"logs","type":"log"}],"selectedTracesFields":[{"fieldContext":"resource","fieldDataType":"string","name":"service.name","signal":"traces"},{"fieldContext":"span","fieldDataType":"string","name":"name","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"duration_nano","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"http_method","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"response_status_code","signal":"traces"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Sessions","yAxisUnit":"none"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{},"description":"","fillSpans":false,"id":"9f3c19ad-090c-4245-8b44-ff13e22d1fa4","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"value","query":{"builder":{"queryData":[{"aggregations":[{"expression":"count() "}],"dataSource":"logs","disabled":false,"expression":"A","filter":{"expression":"body = claude_code.user_prompt"},"functions":[],"groupBy":[],"having":{"expression":""},"legend":"","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"6aaa8ec5-62aa-4063-a96e-eda15c14974b","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"","fieldContext":"log","fieldDataType":"","isColumn":true,"isIndexed":false,"isJSON":false,"name":"timestamp","signal":"logs","type":"log"},{"dataType":"","fieldContext":"log","fieldDataType":"","isColumn":true,"isIndexed":false,"isJSON":false,"name":"body","signal":"logs","type":"log"}],"selectedTracesFields":[{"fieldContext":"resource","fieldDataType":"string","name":"service.name","signal":"traces"},{"fieldContext":"span","fieldDataType":"string","name":"name","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"duration_nano","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"http_method","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"response_status_code","signal":"traces"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Conversations","yAxisUnit":"none"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{},"description":"","fillSpans":false,"id":"79d52e91-6d94-4383-b3c6-8d6b99c05c95","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"pie","query":{"builder":{"queryData":[{"aggregations":[{"expression":"count() "}],"dataSource":"logs","disabled":false,"expression":"A","filter":{"expression":"tool_name EXISTS "},"functions":[],"groupBy":[{"dataType":"string","id":"tool_name--string--tag--false","isColumn":false,"isJSON":false,"key":"tool_name","type":"tag"}],"having":{"expression":""},"legend":"{{tool_name}}","limit":null,"orderBy":[],"queryName":"A","source":"","stepInterval":1980}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":false,"legend":"","name":"A","query":""}],"id":"b77f95a5-80fb-4e0e-8a05-0977f12934a7","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"builder"},"selectedLogFields":[{"dataType":"","fieldContext":"log","fieldDataType":"","isColumn":true,"isIndexed":false,"isJSON":false,"name":"timestamp","signal":"logs","type":"log"},{"dataType":"","fieldContext":"log","fieldDataType":"","isColumn":true,"isIndexed":false,"isJSON":false,"name":"body","signal":"logs","type":"log"}],"selectedTracesFields":[{"fieldContext":"resource","fieldDataType":"string","name":"service.name","signal":"traces"},{"fieldContext":"span","fieldDataType":"string","name":"name","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"duration_nano","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"http_method","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"response_status_code","signal":"traces"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Tool Type","yAxisUnit":"none"},{"bucketCount":30,"bucketWidth":0,"columnUnits":{},"customLegendColors":{},"description":"","fillSpans":false,"id":"a251918c-1f51-49cf-9645-110e5d58a14d","isLogScale":false,"isStacked":false,"legendPosition":"bottom","mergeAllActiveQueries":false,"nullZeroValues":"zero","opacity":"1","panelTypes":"value","query":{"builder":{"queryData":[{"aggregateAttribute":{"dataType":"","id":"------false","isColumn":false,"isJSON":false,"key":"","type":""},"aggregateOperator":"count","aggregations":[{"expression":"count() "}],"dataSource":"logs","disabled":true,"expression":"B","filter":{"expression":"body = claude_code.user_prompt"},"filters":{"items":[{"id":"cc83addd-d477-43bd-9593-b64e9447dd21","key":{"id":"body","key":"body","type":""},"op":"=","value":"claude_code.user_prompt"}],"op":"AND"},"functions":[],"groupBy":[],"having":{"expression":""},"legend":"","limit":null,"orderBy":[],"queryName":"B","reduceTo":"avg","source":"","spaceAggregation":"sum","stepInterval":1980,"timeAggregation":"rate"}],"queryFormulas":[]},"clickhouse_sql":[{"disabled":true,"legend":"","name":"A","query":"SELECT\n  CASE\n    WHEN {{account_type}} = 'Pro' THEN 25\n    WHEN {{account_type}} = 'Max 5x' THEN 125\n    WHEN {{account_type}} = 'Max 20x' THEN 500\n    ELSE 0\n  END AS value"},{"disabled":true,"legend":"","name":"B","query":"SELECT toFloat64(count()) AS value\nFROM signoz_logs.distributed_logs_v2\nWHERE body = 'claude_code.user_prompt'\n  AND timestamp >= toUnixTimestamp64Nano(now64(9) - toIntervalHour(5))\n  AND timestamp <  toUnixTimestamp64Nano(now64(9))\n  AND ts_bucket_start BETWEEN (toUnixTimestamp(now() - toIntervalHour(5)) - 1800)\n                          AND  toUnixTimestamp(now());\n"},{"disabled":false,"legend":"","name":"C","query":"WITH\n  toUnixTimestamp64Nano(now64(9))                                 AS now_ns,\n  toUnixTimestamp64Nano(now64(9) - toIntervalHour(5))             AS start_ns,\n  (\n    CASE\n      WHEN {{account_type}} = 'Pro'      THEN 25\n      WHEN {{account_type}} = 'Max 5x'   THEN 125\n      WHEN {{account_type}} = 'Max 20x'  THEN 500\n      ELSE 0\n    END\n  ) AS limit_value\nSELECT\n  IF(limit_value = 0, 0.0,\n     toFloat64(count_logs) / toFloat64(limit_value)) AS value\nFROM\n(\n  SELECT count() AS count_logs\n  FROM signoz_logs.distributed_logs_v2\n  WHERE body = 'claude_code.user_prompt'\n    AND timestamp >= start_ns\n    AND timestamp <  now_ns\n    AND ts_bucket_start BETWEEN (toUnixTimestamp(now() - toIntervalHour(5)) - 1800)\n                            AND  toUnixTimestamp(now())\n);\n"}],"id":"b449fdaa-06b7-4db7-ac70-1d1fdd125b39","promql":[{"disabled":false,"legend":"","name":"A","query":""}],"queryType":"clickhouse_sql"},"selectedLogFields":[{"dataType":"","fieldContext":"log","fieldDataType":"","isColumn":true,"isIndexed":false,"isJSON":false,"name":"timestamp","signal":"logs","type":"log"},{"dataType":"","fieldContext":"log","fieldDataType":"","isColumn":true,"isIndexed":false,"isJSON":false,"name":"body","signal":"logs","type":"log"}],"selectedTracesFields":[{"fieldContext":"resource","fieldDataType":"string","name":"service.name","signal":"traces"},{"fieldContext":"span","fieldDataType":"string","name":"name","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"duration_nano","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"http_method","signal":"traces"},{"fieldContext":"span","fieldDataType":"","name":"response_status_code","signal":"traces"}],"softMax":0,"softMin":0,"stackedBarChart":false,"thresholds":[],"timePreferance":"GLOBAL_TIME","title":"Quota Usage (Last 5h)","yAxisUnit":"percentunit"}],"uuid":"0198d9a0-9f3d-7671-b542-b0515213b833"}